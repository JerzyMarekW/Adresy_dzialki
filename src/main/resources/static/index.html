<!DOCTYPE html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script>

        // odswieza liste wojewodztw przy wejsciu na strone
        $(document).ready(function () {
            $.ajax({
                url: "/province", success: function (result) {
                    var provinceSelect = document.getElementById("province");
                    var i;
                    var valueHTML = "";
                    for (i = 0; i < result.length; i++) {
                        valueHTML += "<option value='" + result[i].wojIdTeryt + "'>" + result[i].wojNazwa + "</option>";
                    }
                    provinceSelect.innerHTML = valueHTML;
                    $("#province").trigger("change");
                }
            });
        });

        // odswieza liste powiatow przy zmianie wojewodztwa
        $(document).ready(function () {
            $('#province').change(function () {
                var provinceSelect = document.getElementById("province");
                var provinceOptions = provinceSelect.options;
                var provinceValue = provinceOptions[provinceOptions.selectedIndex].value;
                $.ajax({
                    url: "/county/" + provinceValue, success: function (result) {
                        var countySelect = document.getElementById("county");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].powIdTeryt + "'>" + result[i].powNazwa + "</option>";
                        }
                        countySelect.innerHTML = valueHTML;
                        $("#county").trigger("change");
                    }
                });
            })
        });

        // odswieza liste gmin przy zmianie powiatu
        $(document).ready(function () {
            $('#county').change(function () {
                var countySelect = document.getElementById("county");
                var countyOptions = countySelect.options;
                var countyValue = countyOptions[countyOptions.selectedIndex].value;
                $.ajax({
                    url: "/commune/" + countyValue, success: function (result) {
                        var communeSelect = document.getElementById("commune");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].gmIdTeryt + "'>" + result[i].gmNazwa + "</option>";
                        }
                        communeSelect.innerHTML = valueHTML;
                        $("#commune").trigger("change");
                    }
                });
            })
        });

        // odswieza liste miejscowosci przy zmianie gminy
        $(document).ready(function () {
            $('#commune').change(function () {
                var communeSelect = document.getElementById("commune");
                var communeOptions = communeSelect.options;
                var communeValue = communeOptions[communeOptions.selectedIndex].value;
                $.ajax({
                    url: "/town/" + communeValue, success: function (result) {
                        var townSelect = document.getElementById("town");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].miejscIdTeryt + "'>" + result[i].miejscNazwa + "</option>";
                        }
                        townSelect.innerHTML = valueHTML;
                        $("#town").trigger("change");
                    }
                });
            })
        });

        // odswieza liste ulic przy zmianie miejscowosci
        $(document).ready(function () {
            $('#town').change(function () {
                var communeSelect = document.getElementById("commune");
                var communeOptions = communeSelect.options;
                var communeValue = communeOptions[communeOptions.selectedIndex].value;
                var townSelect = document.getElementById("town");
                var townOptions = townSelect.options;
                var townValue = townOptions[townOptions.selectedIndex].value;
                $.ajax({
                    url: "/street/" + communeValue + "/" + townValue, success: function (result) {
                        var streetSelect = document.getElementById("street");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].ulIdTeryt + "'>" + result[i].ulNazwaGlowna + "</option>";
                        }
                        streetSelect.innerHTML = valueHTML;
                        $("#street").trigger("change");
                    }
                });
            })
        });

        // odswieza liste adrespw przy zmienie miejscowosci - w liscie beda tylko adresy bez ulicy
        $(document).ready(function () {
            $('#town').change(function () {
                var communeSelect = document.getElementById("commune");
                var communeOptions = communeSelect.options;
                var communeValue = communeOptions[communeOptions.selectedIndex].value;
                var townSelect = document.getElementById("town");
                var townOptions = townSelect.options;
                var townValue = townOptions[townOptions.selectedIndex].value;
                $.ajax({
                    url: "/address/" + communeValue + "/" + townValue, success: function (result) {
                        var addressSelect = document.getElementById("address");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].pktNumer + "'>" + result[i].pktNumer + "</option>";
                        }
                        addressSelect.innerHTML = valueHTML;
                    }
                });
            })
        });

        // odsiweza liste adresow przy zmianie ulicy
        $(document).ready(function () {
            $('#street').change(function () {
                var communeSelect = document.getElementById("commune");
                var communeOptions = communeSelect.options;
                var communeValue = communeOptions[communeOptions.selectedIndex].value;
                var townSelect = document.getElementById("town");
                var townOptions = townSelect.options;
                var townValue = townOptions[townOptions.selectedIndex].value;
                var streetSelect = document.getElementById("street");
                var streetOptions = streetSelect.options;
                var streetValue = streetOptions[streetOptions.selectedIndex].value;
                $.ajax({
                    url: "/address2/" + communeValue + "/" + townValue + "/" + streetValue, success: function (result) {
                        var addressSelect = document.getElementById("address");
                        var i;
                        var valueHTML = "";
                        for (i = 0; i < result.length; i++) {
                            valueHTML += "<option value='" + result[i].pktNumer + "'>" + result[i].pktNumer + "</option>";
                        }
                        addressSelect.innerHTML = valueHTML;
                    }
                });
            })
        });


    </script>
    <meta charset="UTF-8">
    <title>Działki i adresy</title>
</head>
<body>

<div>
    <form method="post">
        Województwo: <br>
        <select id="province">
        </select> <br>
        Powiat: <br>
        <select id="county">
        </select> <br>
        Gmina: <br>
        <select id="commune">
        </select> <br>
        Miejscowość: <br>
        <select id="town">
        </select> <br>
        Ulica: <br>
        <select id="street">
        </select> <br>
        Adres: <br>
        <select id="address">
        </select> <br>
    </form>
</div>
</body>
</html>